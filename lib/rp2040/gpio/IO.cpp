#include "IO.hpp"
#include "pad_control.hpp"
#include "types.hpp"
#include <HAL/gpio.hpp>

#include <iostream>
#include <new>

std::weak_ptr<IO> IO::storage_handle = std::weak_ptr<IO>();

IO::IO()
    : GPIO0_STATUS(0U), GPIO0_CTRL(0X1FU), GPIO1_STATUS(0U), GPIO1_CTRL(0X1FU),
      GPIO2_STATUS(0U), GPIO2_CTRL(0X1FU), GPIO3_STATUS(0U), GPIO3_CTRL(0X1FU),
      GPIO4_STATUS(0U), GPIO4_CTRL(0X1FU), GPIO5_STATUS(0U), GPIO5_CTRL(0X1FU),
      GPIO6_STATUS(0U), GPIO6_CTRL(0X1FU), GPIO7_STATUS(0U), GPIO7_CTRL(0X1FU),
      GPIO8_STATUS(0U), GPIO8_CTRL(0X1FU), GPIO9_STATUS(0U), GPIO9_CTRL(0X1FU),
      GPIO10_STATUS(0U), GPIO10_CTRL(0X1FU), GPIO11_STATUS(0U),
      GPIO11_CTRL(0X1FU), GPIO12_STATUS(0U), GPIO12_CTRL(0X1FU),
      GPIO13_STATUS(0U), GPIO13_CTRL(0X1FU), GPIO14_STATUS(0U),
      GPIO14_CTRL(0X1FU), GPIO15_STATUS(0U), GPIO15_CTRL(0X1FU),
      GPIO16_STATUS(0U), GPIO16_CTRL(0X1FU), GPIO17_STATUS(0U),
      GPIO17_CTRL(0X1FU), GPIO18_STATUS(0U), GPIO18_CTRL(0X1FU),
      GPIO19_STATUS(0U), GPIO19_CTRL(0X1FU), GPIO20_STATUS(0U),
      GPIO20_CTRL(0X1FU), GPIO21_STATUS(0U), GPIO21_CTRL(0X1FU),
      GPIO22_STATUS(0U), GPIO22_CTRL(0X1FU), GPIO23_STATUS(0U),
      GPIO23_CTRL(0X1FU), GPIO24_STATUS(0U), GPIO24_CTRL(0X1FU),
      GPIO25_STATUS(0U), GPIO25_CTRL(0X1FU), GPIO26_STATUS(0U),
      GPIO26_CTRL(0X1FU), GPIO27_STATUS(0U), GPIO27_CTRL(0X1FU),
      GPIO28_STATUS(0U), GPIO28_CTRL(0X1FU), GPIO29_STATUS(0U),
      GPIO29_CTRL(0X1FU) {
  // TODO: reset registers to enabled but cleared state.
  std::cout << "constructed impl\n";
}

IO::~IO() {
  // TODO: Set gpio to lowest power state.
  std::cout << "destructed impl\n";
}